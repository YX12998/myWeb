<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<script type="text/javascript" src="jquery.js"> </script>
		<title>抛物线</title>

		<style type="text/css">
			.ground {
				width: 100%;
				height: 4px;
				position: absolute;
				top: 86%;
				background-color: aqua;
			}

			.monster {
				width: 40px;
				height: 40px;
				background-color: black;
				position: absolute;
				top: 80%;
				left: 90%;
			}

			.bom {
				width: 40px;
				height: 40px;
				background-color: red;
				border: 1px solid #fff;
				border-radius: 50%;
				position: absolute;
				left: 10%;
				top: 80%;
			}
		</style>
	</head>
	<body>
		<div class="bom"></div>
		<div class="monster"></div>
		<div class="ground"></div>
	</body>
</html>

<script>
	// 初始化位置
	document.getElementsByClassName("monster")[0].style.left = "90%";
	document.getElementsByClassName("bom")[0].style.left = "10%";
	document.getElementsByClassName("bom")[0].style.top = "80%";

	// monster 计时器移动
	var monsterTimer = setInterval(function() {
		var currLeft = document.getElementsByClassName("monster")[0].style.left;
		currLeft = parseFloat(currLeft.replace("%", "")); // 注意, 不是整数

		if (currLeft >= 10) {
			currLeft -= 0.2;
			document.getElementsByClassName("monster")[0].style.left = currLeft + "%";
			//console.info(currLeft);
		} else {
			// 怪物碰到了炮台的处理( 简单复位)
			document.getElementsByClassName("monster")[0].style.left = "90%";
		}

	}, 40);

	// 炮弹的运动 (角度决定 )
	var PI2_360 =  0.017453293 ; // 弧度参数将角度乘以 0.017453293 （2PI/360）即可转换为弧度。
	function bomMove() {
		var angle = 60;
		var gggg = 0.02; //  加速度
		var xSpeed = 0.6; // px
		var ySpeed = Math.tan(angle  * 0.017453293 ) * xSpeed ; // 正弦


		setInterval(function() {
			// x 方向的运动
			var bomCurrX = document.getElementsByClassName("bom")[0].style.left;
			bomCurrX = parseFloat(bomCurrX.replace("%", ""));
			document.getElementsByClassName("bom")[0].style.left = bomCurrX + xSpeed + "%" ;
						
			// 当前Y位置
			var currY = document.getElementsByClassName("bom")[0].style.top;
			currY =  parseFloat(currY.replace("%", ""));
			// 减去加速度
			ySpeed -=  gggg;  // 这个值非常关键!!!
			currY = currY - ySpeed;
			// y位移
			document.getElementsByClassName("bom")[0].style.top = currY + "%"
			
			// 复位
			if(currY > 80 ){
				// 可以考虑在这里做碰撞
				//
				document.getElementsByClassName("bom")[0].style.left = "10%";
				document.getElementsByClassName("bom")[0].style.top = "80%";
				ySpeed = Math.tan(angle  * 0.017453293 ) * xSpeed ;
			}
			//console.info(currY + "                " + ySpeed );
			
		}, 20)
	}
	bomMove();
</script>
