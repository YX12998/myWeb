<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>倒数时钟</title>
		<style type="text/css">
			body{
				background-color: black;
			}
			.heightConbtrol {
				margin-top: 300px;
				transform: rotate(-90deg);
			}

			/* 遮罩 */
			.mask {
				width: 100%;
				height: 100%;
				position: fixed;
				background-color: orange;
				top: 0;
				left: 0;
				display: "";
				opacity: 1;
				text-align: center;
			}

			.countDown {
				width: 200px;
				height: 200px;
				background-color: black;
				position: absolute;
				border-radius: 50%;
				left: 50%;
				top: 20%;
				font-size: 72px;
				line-height: 200px;
				color: white;
			}
			.light{
				width: 200px;
				height: 200px;
				border-radius: 50%;
				background-color: yellow;
				position: absolute;
				left: 50%;
				top: 20%;
				filter: grayscale(100%);
				visibility: hidden;
			}
		</style>
	</head>
	<body>
		<div class="light" id="light1"></div>
		<input type="button" id="bt1" class="myButton" value="点亮">
		<input type="button" id="bt2" class="myButton" value="关灯">

		<input type="range" class="heightConbtrol">
		<div class="mask">
			<div class="countDown" onclick="clock()">
				<div id="countNum" >5</div>
			</div>
		</div>
	</body>
</html>
<script type="text/javascript">
	// 作业1: 倒数 + 遮罩

	function clock() {

		var counter = 5;
		var dingshi = setInterval(function() {
			// document.getElementsByClassName("countDown")[0].style.display = "none";
			document.getElementById("countNum").style.display = "none";
			if (counter > 0) {
				counter -= 1;
				// document.getElementsByClassName("countDown")[0].innerText = counter;
				document.getElementById("countNum").innerText  = counter;
			} else {
				clearInterval(dingshi);
				document.getElementsByClassName("mask")[0].style.display = "none";
			}
			setTimeout(function() {
				// document.getElementsByClassName("countDown")[0].style.display = "block";
				document.getElementById("countNum").style.display = "block";
			}, 600);
		}, 1000);

	}
	// console.info(clock());
	
	// 作业2: 点亮
	
	document.getElementById("bt1").onclick = function(e){
		document.getElementById("light1").style.filter = "grayscale(100%)";
		document.getElementById("light1").style.visibility = "visible";
		var grayscal001 = 100;
		timer2 = setInterval( function() {
			grayscal001 -= 15;
			document.getElementById("light1").style.filter = "grayscale("+ grayscal001 +"%)";
			
			if( grayscal001 <= 0 ){
				document.body.style.background = "#FFFF00";
				clearInterval(timer2);
			}
		}, 400);
	}
	
	document.getElementById("bt2").onclick = function(e){
		clearInterval(timer2); // 终止点亮过程, 进入关灯
		document.getElementById("light1").style.filter = "grayscale(100%)";

		// 反操作 clearTimeout()
		setTimeout( function() {
			document.getElementById("light1").style.visibility = "hidden";
			document.body.style.background = "#000000";

		}, 1000);
	};
	

</script>
