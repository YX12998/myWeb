<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>转盘</title>
		<style type="text/css">
			body {
				text-align: center;
			}

			.rollingpan {
				width: 600px;
				height: 600px;
				border-radius: 50%;
				/* border: 10px solid black; */
				background-color: greenyellow;
				padding: 10px;

			}

			.itemX {
				width: 600px;
				height: 60px;
				/* border: 2px solid mediumpurple */
				margin-top: 268px;
				position: absolute;
				text-align: right;
				line-height: 60px;
				font-size: 24px;
				
			}

			.zhen {
				/* border: 5px solid black; */
				background-color: #000;
				width: 20px;
				height: 270px;
				position: absolute;
				top: 60px;
				left: 310px;
				-webkit-clip-path: polygon(50% 0, 100% 10%, 80% 10%, 80% 100%, 20% 100%, 20% 10%, 0 10%);
			}
		</style>
	</head>
	<body>

		<button id="startRolling">抽奖</button>
		<!-- <button id="stopRolling">停</button> -->

		<div class="rollingpan" id="rollingpan1111">
			<!-- <div class="itemX" id="item1" style="transform: rotate(0deg);">尚冉</div>
			<div class="itemX" id="item2" style="transform: rotate(12deg);">袁鑫</div>
			<div class="itemX" id="item2" style="transform: rotate(24deg);">尚冉</div>
			<div class="itemX" id="item2" style="transform: rotate(36deg);">袁鑫</div>
			<div class="itemX" id="item2" style="transform: rotate(48deg);">尚冉</div>
			<div class="itemX" id="item2" style="transform: rotate(60deg);">袁鑫</div>
			<div class="itemX" id="item1" style="transform: rotate(72deg);">尚冉</div>
			<div class="itemX" id="item2" style="transform: rotate(84deg);">袁鑫</div>
			<div class="itemX" id="item2" style="transform: rotate(96deg);">尚冉</div>
			<div class="itemX" id="item2" style="transform: rotate(108deg);">袁鑫</div>
			<div class="itemX" id="item2" style="transform: rotate(120deg);">尚冉</div>
			<div class="itemX" id="item2" style="transform: rotate(132deg);">袁鑫</div>
			<div class="itemX" id="item2" style="transform: rotate(144deg);">尚冉</div>
			<div class="itemX" id="item2" style="transform: rotate(156deg);">袁鑫</div>
			<div class="itemX" id="item2" style="transform: rotate(168deg);">尚冉</div>
			<div class="itemX" id="item2" style="transform: rotate(180deg);">袁鑫</div>

			<div class="itemX" id="item1" style="transform: rotate(0deg);">尚冉</div>
			<div class="itemX" id="item2" style="transform: rotate(-12deg);">袁鑫</div>
			<div class="itemX" id="item2" style="transform: rotate(-24deg);">尚冉</div>
			<div class="itemX" id="item2" style="transform: rotate(-36deg);">袁鑫</div>
			<div class="itemX" id="item2" style="transform: rotate(-48deg);">尚冉</div>
			<div class="itemX" id="item2" style="transform: rotate(-60deg);">袁鑫</div>
			<div class="itemX" id="item1" style="transform: rotate(-72deg);">尚冉</div>
			<div class="itemX" id="item2" style="transform: rotate(-84deg);">袁鑫</div>
			<div class="itemX" id="item2" style="transform: rotate(-96deg);">尚冉</div>
			<div class="itemX" id="item2" style="transform: rotate(-108deg);">袁鑫</div>
			<div class="itemX" id="item2" style="transform: rotate(-120deg);">尚冉</div>
			<div class="itemX" id="item2" style="transform: rotate(-132deg);">袁鑫</div>
			<div class="itemX" id="item2" style="transform: rotate(-144deg);">尚冉</div>
			<div class="itemX" id="item2" style="transform: rotate(-156deg);">袁鑫</div>
			<div class="itemX" id="item2" style="transform: rotate(-168deg);">尚冉</div>
			<div class="itemX" id="item2" style="transform: rotate(-180deg);">袁鑫</div> -->
		</div>
		<div class="zhen"></div>
	</body>
</html>
<script type="text/javascript">
	var timerPan = 0;

	function doRolling(flag) {
		if (timerPan) {
			console.info(document.getElementById("rollingpan1111").style.transform);
			clearInterval(timerPan);
		}
		if (flag) {
			var currAngle = document.getElementById("rollingpan1111").style.transform;
			if (!currAngle) {
				currAngle = 0;
			} else {
				currAngle = currAngle.replace("rotate(", "");
				currAngle = currAngle.replace("deg)", "");
				currAngle = parseInt(currAngle);
				}
			//var anble = 0;
			timerPan = setInterval(function() {
				currAngle += 10;
				if (currAngle > 360) {
					currAngle = 0;
				}
				document.getElementById("rollingpan1111").style.transform = "rotate(" + currAngle + "deg)";

			}, 50)
		}
	}

	// document.getElementById("stopRolling").onclick = function(e) {
	// 	doRolling(false);
	// }
	// document.getElementById("startRolling").onclick = function(e) {
	// 	doRolling(true);
	// }
	var _isRolling = true; // 转盘状态标志位
	// doRolling(_isRolling);
	document.getElementById("startRolling").onclick = function(e) {
		if( _isRolling == false ){
			_isRolling = true;
		}else{
			_isRolling = false;
		}
		doRolling(_isRolling);
	}
	
		var allStudents = [
		{
			name: "曾敏",
			id: 1
		},
		{
			name: "黄盛玺",
			id: 2
		},
		{
			name: "杨庆文",
			id: 300
		},
		{
			name: "李春朋",
			id: 4
		},
		{
			name: "赵珊",
			id: 5
		},
		{
			name: "孙蒙",
			id: 6
		},
		{
			name: "高原",
			id: 7
		},
		{
			name: "雷雪煜",
			id: 8
		},
		{
			name: "王文金",
			id: 9
		},
		{
			name: "韦清源",
			id: 10
		},
		{
			name: "高佳骏",
			id: 11
		},
		{
			name: "董青林",
			id: 12
		},
		{
			name: "刘伟业",
			id: 13
		},
		{
			name: "陈艺宇",
			id: 14
		},
		{
			name: "李烜铖",
			id: 15
		},
		{
			name: "满春发",
			id: 16
		},
		{
			name: "蒙承彪",
			id: 17
		},
		{
			name: "苏壮晖",
			id: 18
		},
		{
			name: "施一航",
			id: 19
		},
		{
			name: "王程鑫",
			id: 20
		},
		{
			name: "骆明睿",
			id: 21
		},
		{
			name: "梁鸿标",
			id: 22
		},
		{
			name: "黄伟洪",
			id: 23
		},
		{
			name: "黄河源",
			id: 24
		},
		{
			name: "杨昊",
			id: 25
		},
		{
			name: "李旭昊",
			id: 26
		},
		{
			name: "黄春惠",
			id: 27
		},
		{
			name: "尚冉",
			id: 28
		},
		{
			name: "袁鑫",
			id: 29
		}
	];
	
	
	//课堂作业, 数据分离
	function fillRollingPan(studentsArr){
		
		var oneAngle = 360 / studentsArr.length ;
		for( var i = 0; i < studentsArr.length; i++ ){
			// document.createAttribute("div");
			// document.createAttribute("class", "itemX");
			var oneStudent = document.createElement("div");
			oneStudent.setAttribute("class", "itemX");
			oneStudent.id = "item" +studentsArr[i].id;
			oneStudent.innerText = studentsArr[i].name;
			var currAngle = oneAngle * i ;
			oneStudent.style.transform = "rotate("+ currAngle +"deg)";
			
			document.getElementById("rollingpan1111").appendChild(oneStudent);
		}
	}
	fillRollingPan(allStudents);

</script>
